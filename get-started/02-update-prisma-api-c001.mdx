export const meta = {
  title: 'Update Prisma API',
  step: 2,
}

## Goals

On this page, you will learn how to:

- Change the data model of your Prisma service
- Deploy the adjusted data model to update your Prisma API
- Send _nested_ queries and mutations

## Step 1: Adjust your data model

Update the data model in `datamodel.graphql` as follows. You are adding a new `Post` type to the data model as well as a _relation_ between `User` and `Post` (via the `posts` and `author` fields):

```graphql
type User {
  id: ID! @unique
  name: String!
  posts: [Post!]!
}

type Post {
  id: ID! @unique
  title: String!
  published: Boolean! @default(value: "false")
  author: User
}
```

## Step 2: (Re-)Deploy your Prisma service

To apply the changes you just made to your data model, you need to (re-)deploy your Prisma service:

```bash
prisma deploy
```

## Step 3: Explore the Prisma API in a Playground

Open a [GraphQL Playground](https://github.com/prismagraphql/graphql-playground) using the following command:

```bash
prisma playground
```

Because of the relation that was added to the data model, you can now send _nested_ queries and mutations to read and modify _connected_ nodes.

**Create a new `Post` and a new `User` as its `author`**:

```graphql
mutation {
  createPost(data: {
    title: "GraphQL is great"
    author: {
      create: {
        name: "Bob"
      }
    }
  }) {
    id
    published
    author {
      id
    }
  }
}
```

**Query all `User`s and their `Post`s**:

```graphql
query {
  users {
    id
    name
    posts {
      id
      title
      published
    }
  }
}
```